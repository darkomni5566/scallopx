(self.webpackChunkblack_dashboard_angular=self.webpackChunkblack_dashboard_angular||[]).push([[565],{48565:function(t,e,n){"use strict";n.r(e),n.d(e,{ActivityLogModule:function(){return _}});var i=n(38583),o=n(91841),r=n(90665),a=n(14330),s=n(89736),u=n(72533),l=n(76419),c=n(89019),g=n(67709),d=n(43151),Z=n(9022);function p(t,e){if(1&t){var n=Z.EpF();Z.TgZ(0,"a",39),Z.NdJ("click",function(){var t=Z.CHM(n).$implicit,e=Z.oxw(2);return e.eventType=t,e.currentPage=1,e.getUserList()}),Z._uU(1),Z.qZA()}if(2&t){var i=e.$implicit;Z.xp6(1),Z.Oqu(i)}}function h(t,e){if(1&t){var n=Z.EpF();Z.TgZ(0,"a",39),Z.NdJ("click",function(){Z.CHM(n);var t=Z.oxw(2);return t.selectedRole="ADMIN",t.currentPage=1,t.getUserList()}),Z._uU(1,"ADMIN"),Z.qZA()}}function m(t,e){if(1&t){var n=Z.EpF();Z.TgZ(0,"a",39),Z.NdJ("click",function(){Z.CHM(n);var t=Z.oxw(2);return t.selectedRole="USER",t.currentPage=1,t.getUserList()}),Z._uU(1,"USER"),Z.qZA()}}function f(t,e){if(1&t){var n=Z.EpF();Z.TgZ(0,"div",20),Z.TgZ(1,"div",21),Z.TgZ(2,"div"),Z.TgZ(3,"label"),Z.TgZ(4,"h4",22),Z._uU(5,"Email"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(6,"div",23),Z.TgZ(7,"input",24),Z.NdJ("ngModelChange",function(t){return Z.CHM(n),Z.oxw().searchKey=t})("keypress",function(t){return Z.CHM(n),Z.oxw().server.preventSpaceInStart(t)}),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(8,"div",25),Z.TgZ(9,"div"),Z.TgZ(10,"label"),Z.TgZ(11,"h4",22),Z._uU(12,"From"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(13,"div",23),Z.TgZ(14,"input",26),Z.NdJ("ngModelChange",function(t){return Z.CHM(n),Z.oxw().fromDate=t})("change",function(){return Z.CHM(n),Z.oxw().onFromSelect()}),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(15,"div",25),Z.TgZ(16,"div"),Z.TgZ(17,"label"),Z.TgZ(18,"h4",22),Z._uU(19,"To"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(20,"div",23),Z.TgZ(21,"input",27),Z.NdJ("ngModelChange",function(t){return Z.CHM(n),Z.oxw().toDate=t})("change",function(){return Z.CHM(n),Z.oxw().onToSelect()}),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(22,"div",28),Z.TgZ(23,"div",29),Z.TgZ(24,"button",30),Z._uU(25),Z.ALo(26,"slice"),Z.qZA(),Z.TgZ(27,"div",31),Z.YNc(28,p,2,1,"a",32),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(29,"div",33),Z.TgZ(30,"div",29),Z.TgZ(31,"button",30),Z._uU(32),Z.qZA(),Z.TgZ(33,"div",31),Z.YNc(34,h,2,0,"a",34),Z.YNc(35,m,2,0,"a",34),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(36,"div",28),Z.TgZ(37,"button",35),Z.NdJ("click",function(){Z.CHM(n);var t=Z.oxw();return t.currentPage=1,t.getUserList()}),Z._UZ(38,"i",36),Z.qZA(),Z._uU(39,"\xa0\xa0 "),Z.TgZ(40,"button",37),Z.NdJ("click",function(){return Z.CHM(n),Z.oxw().clearSearch()}),Z._UZ(41,"i",38),Z.qZA(),Z.qZA(),Z.qZA()}if(2&t){var i=Z.oxw();Z.xp6(7),Z.Q6J("ngModel",i.searchKey),Z.xp6(7),Z.Q6J("ngModel",i.fromDate)("max",i.maxFromDate),Z.xp6(7),Z.Q6J("ngModel",i.toDate)("min",i.maxToDate),Z.xp6(4),Z.hij(" ",Z.Dn7(26,10,i.eventType,0,10)||"Activity Type"," "),Z.xp6(3),Z.Q6J("ngForOf",i.userStatus),Z.xp6(4),Z.hij(" ",i.selectedRole||"Role"," "),Z.xp6(2),Z.Q6J("ngIf","ADMIN"!=i.selectedRole),Z.xp6(1),Z.Q6J("ngIf","USER"!=i.selectedRole)}}function T(t,e){1&t&&(Z.TgZ(0,"span"),Z._uU(1,"ago"),Z.qZA())}function v(t,e){if(1&t&&(Z.TgZ(0,"tr"),Z.TgZ(1,"td"),Z._uU(2),Z.qZA(),Z.TgZ(3,"td"),Z._uU(4),Z.ALo(5,"date"),Z._UZ(6,"br"),Z.TgZ(7,"label"),Z._uU(8),Z.YNc(9,T,2,0,"span",45),Z.qZA(),Z.qZA(),Z.TgZ(10,"td"),Z._uU(11),Z.qZA(),Z.TgZ(12,"td"),Z._uU(13),Z.qZA(),Z.TgZ(14,"td"),Z._uU(15),Z.qZA(),Z.TgZ(16,"td"),Z._uU(17),Z.qZA(),Z.TgZ(18,"td",47),Z._uU(19),Z.qZA(),Z.qZA()),2&t){var n=e.$implicit,i=e.index,o=Z.oxw(2);Z.xp6(2),Z.Oqu(o.itemPerPage*(o.currentPage-1)+i+1),Z.xp6(2),Z.Oqu(Z.xi3(5,9,null==n?null:n.creationTime,"medium")),Z.xp6(4),Z.hij("",null==n?null:n.ago," "),Z.xp6(1),Z.Q6J("ngIf",null==n?null:n.ago),Z.xp6(2),Z.Oqu(null==n?null:n.email),Z.xp6(2),Z.Oqu((null==n?null:n.role)||"---"),Z.xp6(2),Z.Oqu((null==n?null:n.ip)||"---"),Z.xp6(2),Z.Oqu((null==n?null:n.eventType)||"---"),Z.xp6(2),Z.Oqu(null==n||null==n.activityDetails?null:n.activityDetails.message)}}function A(t,e){1&t&&(Z.TgZ(0,"tr"),Z.TgZ(1,"td",48),Z._uU(2,"No Record Found"),Z.qZA(),Z.qZA())}function b(t,e){if(1&t){var n=Z.EpF();Z.TgZ(0,"div",49),Z.TgZ(1,"pagination-controls",50),Z.NdJ("pageChange",function(t){return Z.CHM(n),Z.oxw(2).pagination(t)}),Z.qZA(),Z.qZA()}}var q=function(t,e,n){return{itemsPerPage:t,totalItems:e,currentPage:n}};function x(t,e){if(1&t&&(Z.TgZ(0,"div",40),Z.TgZ(1,"div",41),Z.TgZ(2,"table",42),Z.TgZ(3,"thead",43),Z.TgZ(4,"tr"),Z.TgZ(5,"th"),Z._uU(6,"#"),Z.qZA(),Z.TgZ(7,"th"),Z._uU(8,"Date"),Z.qZA(),Z.TgZ(9,"th"),Z._uU(10,"Email"),Z.qZA(),Z.TgZ(11,"th"),Z._uU(12,"Role"),Z.qZA(),Z.TgZ(13,"th"),Z._uU(14,"IP"),Z.qZA(),Z.TgZ(15,"th"),Z._uU(16,"Action"),Z.qZA(),Z.TgZ(17,"th"),Z._uU(18,"Description"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(19,"tbody"),Z.YNc(20,v,20,12,"tr",44),Z.ALo(21,"paginate"),Z.YNc(22,A,3,0,"tr",45),Z.qZA(),Z.qZA(),Z.qZA(),Z.YNc(23,b,2,0,"div",46),Z.qZA()),2&t){var n=Z.oxw();Z.xp6(20),Z.Q6J("ngForOf",Z.xi3(21,3,n.userList,Z.kEZ(6,q,n.itemPerPage,n.totalItems,n.currentPage))),Z.xp6(2),Z.Q6J("ngIf",0==n.userList.length),Z.xp6(1),Z.Q6J("ngIf",0==!n.userList.length)}}function y(t,e){if(1&t){var n=Z.EpF();Z.TgZ(0,"div",40),Z.TgZ(1,"div",51),Z.TgZ(2,"button",52),Z.NdJ("click",function(){return Z.CHM(n),Z.oxw().navigateTo()}),Z._UZ(3,"i",53),Z._uU(4,"Back"),Z.qZA(),Z.qZA(),Z.TgZ(5,"div",54),Z.TgZ(6,"table",42),Z.TgZ(7,"tbody"),Z.TgZ(8,"tr",55),Z._UZ(9,"td"),Z.TgZ(10,"td",56),Z._uU(11,"Name"),Z.qZA(),Z.TgZ(12,"td"),Z._uU(13),Z.qZA(),Z.qZA(),Z.TgZ(14,"tr",55),Z._UZ(15,"td"),Z.TgZ(16,"td",56),Z._uU(17,"Mobile Number"),Z.qZA(),Z.TgZ(18,"td"),Z._uU(19),Z.qZA(),Z.qZA(),Z.TgZ(20,"tr",55),Z._UZ(21,"td"),Z.TgZ(22,"td",56),Z._uU(23,"Updated At"),Z.qZA(),Z.TgZ(24,"td"),Z._uU(25),Z.ALo(26,"date"),Z.qZA(),Z.qZA(),Z.TgZ(27,"tr",55),Z._UZ(28,"td"),Z.TgZ(29,"td",56),Z._uU(30,"Status"),Z.qZA(),Z.TgZ(31,"td"),Z._uU(32),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()}if(2&t){var i=Z.oxw();Z.xp6(13),Z.AsE("",null==i.userDetailsObj?null:i.userDetailsObj.firstName," ",null==i.userDetailsObj?null:i.userDetailsObj.lastName,""),Z.xp6(6),Z.Oqu(null==i.userDetailsObj?null:i.userDetailsObj.phoneNumber),Z.xp6(6),Z.Oqu(Z.lcZ(26,5,null==i.userDetailsObj?null:i.userDetailsObj.updatedOn)),Z.xp6(7),Z.Oqu(null==i.userDetailsObj?null:i.userDetailsObj.status)}}var U=[{path:"activity",component:function(){function t(t,e,n){var i,o=this;this.server=t,this.router=e,this.route=n,this.gameHistoryArr=[],this.itemPerPage=10,this.currentPage=1,this.totalItems=0,this.userList=[],this.searchKey="",this.search$=new g.xQ,this.userDetailsObj={},this.userStatus=[],this.selectedRole="USER",this.permissionObj={},i=localStorage.getItem("permitted")?JSON.parse(atob(localStorage.getItem("permitted"))):[],this.permissionObj=i.find(function(t){return"Activity Log"==t.name}),this.router.url.includes("activity")?(this.title="Activity Log",this.buttonName="User"):(this.title="User Detail",this.buttonName="View",this.route.params.subscribe(function(t){o.userDetailsObj=JSON.parse(atob(t.id))})),this.getUserList()}return t.prototype.ngOnInit=function(){this.subscribeToSearch()},t.prototype.navigateTo=function(){this.router.navigateByUrl("user-list")},t.prototype.ngOnDestroy=function(){this.sub&&this.sub.unsubscribe()},t.prototype.pagination=function(t){this.currentPage=t,this.getUserList()},t.prototype.subscribeToSearch=function(){var t=this;this.sub=this.search$.pipe((0,d.debounceTime)(1e3)).subscribe(function(e){t.searchKey=e,t.currentPage=1,t.getUserList()})},t.prototype.onFromSelect=function(){var t=new Date(this.fromDate).getTime()+864e5;this.maxToDate=new Date(t).toLocaleDateString().split("/").reverse().join("-")},t.prototype.onToSelect=function(){var t=new Date(this.toDate).getTime()-864e5;this.maxFromDate=new Date(t).toLocaleDateString().split("/").reverse().join("-")},t.prototype.getUserList=function(){var t=this;this.userList=[],this.totalItems=0;var e=c._.activity.postActivity,n={page:this.currentPage-1,page_size:this.itemPerPage,ip:localStorage.getItem("ip")};this.fromDate&&this.toDate&&(n.from_Date=new Date(this.fromDate).getTime(),n.to_date=new Date(this.toDate).getTime()),this.eventType&&(n.eventType=this.eventType),this.searchKey.trim()&&(n.email=this.searchKey.trim()),this.selectedRole&&(n.role=this.selectedRole),this.server.showSpinner(),this.server.postApi(e,n).subscribe(function(e){t.server.hideSpinner(),200==e.status?(t.userList=e.data.data,t.userStatus=e.data.enums,t.server.showSuccToast(e.message),t.totalItems=e.data.activityCount,t.userList.forEach(function(t){t.encryptedId=btoa(JSON.stringify(t));var e=((new Date).getTime()-new Date(t.creationTime).getTime())/1e3,n=Math.floor(e/3600),i=Math.floor(e/60)-60*n;t.ago=(0!=n?n+"hrs":"")+(0!=i?i+" min ":"")})):205==e.status&&t.server.showErrToast(e.message)},function(e){t.server.hideSpinner(),401==e.status||400==e.status||e.status,t.server.showErrToast(e.error.message)})},t.prototype.clearSearch=function(){this.selectedRole="USER",this.searchKey="",this.fromDate="",this.toDate="",this.eventType="",this.currentPage=1,this.totalItems=0,this.getUserList()},t.prototype.searchResult=function(t){var e=t.which?t.which:t.keyCode,n=t.target.value;if(13!=e&&(8!=e||0!=this.searchKey.length)&&16!=e){var i=n.replace(/[`!#$%^&*()+\-=\[\]{};':"\\|,<>\/?~]/g,"");this.searchKey!=i.trim()&&this.search$.next(i.trim()),""==i&&""!=n&&this.server.showErrToast(n+" not allowed"),t.target.value=i}},t.prototype.deleteUser=function(){},t.\u0275fac=function(e){return new(e||t)(Z.Y36(l.N),Z.Y36(a.F0),Z.Y36(a.gz))},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-activity-log"]],decls:29,vars:4,consts:[[1,"wrapper"],[1,"main-panel"],[1,"content"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header",2,"display","flex"],[1,"tim-icons","icon-paper","mr-2",2,"font-size","x-large"],["class","row ml10",4,"ngIf"],["class"," card-body",4,"ngIf"],["id","myModal",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-success","modalSpace",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-danger"],[1,"row","ml10"],[1,"col-md-3"],[1,"text-muted",2,"margin-bottom","auto"],[1,"form-group"],["placeholder","Search by email","type","text",1,"form-control",3,"ngModel","ngModelChange","keypress"],[1,"col-md-2"],["type","date",1,"form-control","dtfld",3,"ngModel","max","ngModelChange","change"],["type","date",1,"form-control","dtfld",3,"ngModel","min","ngModelChange","change"],[1,"col-md-2","text-center"],[1,"btn-group","mt25"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-info","dropdown-toggle"],[1,"dropdown-menu"],["class","dropdown-item","href","javascript:void(0)",3,"click",4,"ngFor","ngForOf"],[1,"col-md-1","text-center"],["class","dropdown-item","href","javascript:void(0)",3,"click",4,"ngIf"],["type","button","rel","tooltip","title","Filter",1,"mt25","btn","btn-info","btn-sm","btn-icon",3,"click"],[1,"tim-icons","icon-zoom-split"],["type","button","rel","tooltip","title","Reset",1,"mt25","btn","btn-warning","btn-sm","btn-icon",3,"click"],[1,"tim-icons","icon-refresh-02"],["href","javascript:void(0)",1,"dropdown-item",3,"click"],[1,"card-body"],[1,"table-responsive",2,"text-align","center"],["id","",1,"table","tablesorter"],[1,"text-primary"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","custom-pagination mt-2","style","text-align: right;",4,"ngIf"],[1,"cell"],["colspan","9",1,"table-no-record"],[1,"custom-pagination","mt-2",2,"text-align","right"],[3,"pageChange"],[1,"card-footer"],["type","submit",1,"btn","btn-fill","btn-danger",3,"click"],[1,"fa","fa-arrow-left","mr10"],[1,"table-responsive"],[1,"text-left"],[1,"heading"]],template:function(t,e){1&t&&(Z.TgZ(0,"div",0),Z.TgZ(1,"div",1),Z.TgZ(2,"div",2),Z.TgZ(3,"div",3),Z.TgZ(4,"div",4),Z.TgZ(5,"div",5),Z.TgZ(6,"div",6),Z._UZ(7,"i",7),Z.TgZ(8,"h2"),Z._uU(9),Z.qZA(),Z.qZA(),Z._UZ(10,"hr"),Z.YNc(11,f,42,14,"div",8),Z.YNc(12,x,24,10,"div",9),Z.YNc(13,y,33,7,"div",9),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(14,"div",10),Z.TgZ(15,"div",11),Z.TgZ(16,"div",12),Z.TgZ(17,"div",13),Z.TgZ(18,"h4",14),Z._uU(19,"Delete"),Z.qZA(),Z.TgZ(20,"button",15),Z._uU(21,"\xd7"),Z.qZA(),Z.qZA(),Z.TgZ(22,"div",16),Z._uU(23," Are you sure you want to delete this user? "),Z.qZA(),Z.TgZ(24,"div",17),Z.TgZ(25,"button",18),Z.NdJ("click",function(){return e.deleteUser()}),Z._uU(26,"Yes"),Z.qZA(),Z.TgZ(27,"button",19),Z._uU(28,"No"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()),2&t&&(Z.xp6(9),Z.Oqu(e.title),Z.xp6(2),Z.Q6J("ngIf","View"!=e.buttonName),Z.xp6(1),Z.Q6J("ngIf","View"!=e.buttonName),Z.xp6(1),Z.Q6J("ngIf","View"==e.buttonName))},directives:[i.O5,r.Fj,r.JJ,r.On,i.sg,u.LS],pipes:[i.OU,u._s,i.uU],styles:['.heading[_ngcontent-%COMP%] {\n  font-weight: 700;\n}\n\n\n\n[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 0px;\n  height: 0px;\n}\n\n\n\n[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: #212529;\n}\n\n.mr10[_ngcontent-%COMP%] {\n  margin-right: 10px;\n}\n\n.user-img[_ngcontent-%COMP%] {\n  max-width: 50px;\n  min-width: 50px;\n  max-height: 50px;\n  -o-object-fit: contain;\n     object-fit: contain;\n  -o-object-position: center;\n     object-position: center;\n}\n\n.mt25[_ngcontent-%COMP%] {\n  margin-top: 25px;\n}\n\n.cell[_ngcontent-%COMP%] {\n  max-width: 50px;\n  text-align: justify;\n}\n\n.ml10[_ngcontent-%COMP%] {\n  margin-left: 10px;\n}\n\n.dropdown-menu[_ngcontent-%COMP%] {\n  max-height: 190px;\n  overflow-y: scroll;\n}\n\np.dumy-field[_ngcontent-%COMP%] {\n  font-size: 15px;\n  color: #000000;\n  font-family: "Product Sans";\n  text-align: justify;\n  width: 317px;\n  position: inherit;\n}\n\n.dtfld[_ngcontent-%COMP%] {\n  padding: 0px 0px 0px 10px;\n}']}),t}()}],_=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Z.oAB({type:t}),t.\u0275inj=Z.cJS({imports:[[i.ez,a.Bz.forChild(U),r.u5,o.JF,s.IJ,r.u5,r.UX,u.JX]]}),t}()}}]);