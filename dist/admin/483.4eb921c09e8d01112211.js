(self.webpackChunkblack_dashboard_angular=self.webpackChunkblack_dashboard_angular||[]).push([[483],{73483:function(t,n,e){"use strict";e.r(n),e.d(n,{NotificationModule:function(){return v}});var i=e(38583),o=e(91841),r=e(90665),a=e(14330),c=e(89736),g=e(72533),s=e(76419),l=e(89019),u=e(9022);function d(t,n){1&t&&(u.TgZ(0,"span"),u._uU(1,"ago"),u.qZA())}function m(t,n){if(1&t&&(u.TgZ(0,"p",44),u._uU(1),u.qZA()),2&t){var e=u.oxw().$implicit;u.xp6(1),u.hij(" ",null==e?null:e.message,"")}}function p(t,n){if(1&t&&(u.TgZ(0,"p",45),u._uU(1),u.qZA()),2&t){var e=u.oxw().$implicit;u.Q6J("innerHtml",(null==e?null:e.message)||"---",u.oJD),u.xp6(1),u.hij(" ",null==e?null:e.message,"")}}function Z(t,n){if(1&t&&(u.TgZ(0,"div",27),u.TgZ(1,"div",28),u.TgZ(2,"div",29),u.TgZ(3,"div",30),u.TgZ(4,"div",31),u.TgZ(5,"div",32),u.TgZ(6,"h5"),u._uU(7),u.qZA(),u.qZA(),u.TgZ(8,"div",32),u.TgZ(9,"h4"),u._uU(10),u.ALo(11,"date"),u._UZ(12,"br"),u.TgZ(13,"label"),u._uU(14),u.YNc(15,d,2,0,"span",33),u.qZA(),u.qZA(),u.qZA(),u.TgZ(16,"div",34),u.TgZ(17,"div",35),u.TgZ(18,"h6",36),u._uU(19,"Notification Type"),u.qZA(),u.qZA(),u.TgZ(20,"div",37),u._uU(21),u.qZA(),u.qZA(),u._UZ(22,"hr"),u.TgZ(23,"div",34),u.TgZ(24,"div",35),u.TgZ(25,"h6",36),u._uU(26,"Is Seen"),u.qZA(),u.qZA(),u.TgZ(27,"div",37),u._uU(28),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(29,"div",38),u.TgZ(30,"div",39),u.TgZ(31,"div",30),u.TgZ(32,"div"),u.TgZ(33,"h6",40),u.TgZ(34,"i",41),u._uU(35,"MESSAGE"),u.qZA(),u.qZA(),u.TgZ(36,"div",34),u.TgZ(37,"div"),u.YNc(38,m,2,1,"p",42),u.YNc(39,p,2,2,"p",43),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t){var e=n.$implicit;u.xp6(7),u.Oqu((null==e?null:e.sentTo)||"---"),u.xp6(3),u.hij("",u.xi3(11,8,null==e?null:e.createdAt,"medium")," "),u.xp6(4),u.hij("",null==e?null:e.ago," "),u.xp6(1),u.Q6J("ngIf",null==e?null:e.ago),u.xp6(6),u.hij(" ",null==e?null:e.notificationType," "),u.xp6(7),u.hij(" ",(null==e?null:e.isSeen)||"---"," "),u.xp6(10),u.Q6J("ngIf","SMS"==(null==e?null:e.notificationType)),u.xp6(1),u.Q6J("ngIf","EMAIL"==(null==e?null:e.notificationType))}}function f(t,n){if(1&t){var e=u.EpF();u.TgZ(0,"div",46),u.TgZ(1,"pagination-controls",47),u.NdJ("pageChange",function(t){return u.CHM(e),u.oxw().pagination(t)}),u.qZA(),u.qZA()}}var h=function(t,n,e){return{itemsPerPage:t,totalItems:n,currentPage:e}},T=[{path:"notification",component:function(){function t(t,n,e){var i;this.server=t,this.router=n,this.route=e,this.itemPerPage=10,this.currentPage=1,this.totalItems=0,this.notificationList=[],this.permissionObj={},this.searchKey="",i=localStorage.getItem("permitted")?JSON.parse(atob(localStorage.getItem("permitted"))):[],this.permissionObj=i.find(function(t){return"Notification Management"==t.name})}return t.prototype.ngOnInit=function(){this.getNotificationList()},t.prototype.getNotificationList=function(){var t=this;this.notificationList=[],this.totalItems=0;var n=l._.notification.getNotification,e={page:this.currentPage-1,page_size:this.itemPerPage,ip:localStorage.getItem("ip")};this.fromDate&&this.toDate&&(e.fromDate=new Date(this.fromDate).getTime(),e.toDate=new Date(this.toDate).getTime()),this.searchKey.trim()&&(e.email=this.searchKey.trim()),this.server.showSpinner(),this.server.postApi(n,e).subscribe(function(n){t.server.hideSpinner(),200==n.status?(t.notificationList=n.data.data,t.totalItems=n.data.notificationCount,t.notificationList.forEach(function(t){var n=((new Date).getTime()-new Date(t.createdAt).getTime())/1e3,e=Math.floor(n/3600),i=Math.floor(n/60)-60*e;t.ago=(0!=e?e+"hrs":"")+(0!=i?i+" min ":"")})):205==n.status&&t.server.showErrToast(n.message)},function(n){t.server.hideSpinner(),401==n.status||400==n.status||n.status,t.server.showErrToast(n.error.message)})},t.prototype.pagination=function(t){this.currentPage=t,this.getNotificationList()},t.prototype.clearSearch=function(){this.fromDate="",this.toDate="",this.searchKey="",this.currentPage=1,this.totalItems=0,this.getNotificationList()},t.prototype.onFromSelect=function(){var t=new Date(this.fromDate).getTime()+864e5;this.maxToDate=new Date(t).toLocaleDateString().split("/").reverse().join("-")},t.prototype.onToSelect=function(){var t=new Date(this.toDate).getTime()-864e5;this.maxFromDate=new Date(t).toLocaleDateString().split("/").reverse().join("-")},t.\u0275fac=function(n){return new(n||t)(u.Y36(s.N),u.Y36(a.F0),u.Y36(a.gz))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-notification-management"]],decls:39,vars:14,consts:[[1,"wrapper"],[1,"main-panel"],[1,"content"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header",2,"display","flex"],[1,"tim-icons","icon-bell-55","mr-2",2,"font-size","x-large"],[1,"col-md-3","ml-2"],[1,"form-group",2,"display","flex"],["type","text","placeholder","Search by email",1,"form-control","pointer",3,"ngModel","ngModelChange","keypress"],[2,"text-align","end","margin-top","4px"],[1,"text-muted","fmblk"],[1,"col-md-3"],["type","date",1,"form-control","pointer",3,"ngModel","max","ngModelChange","change"],[1,"text-muted","toblk"],["type","date",1,"form-control","pointer",3,"ngModel","min","ngModelChange","change"],[1,"col-md-2"],["type","button","rel","tooltip",1,"btn","btn-info","btn-sm","btn-icon",3,"click"],[1,"tim-icons","icon-zoom-split"],["type","button","rel","tooltip",1,"btn","btn-warning","btn-sm","btn-icon",3,"click"],[1,"tim-icons","icon-refresh-02"],[1,"table-responsive"],[1,"container"],[1,"main-body-user"],["class","row gutters-sm",4,"ngFor","ngForOf"],["class","custom-pagination mt-2","style","text-align: center;",4,"ngIf"],[1,"row","gutters-sm"],[1,"col-md-4","mb-3"],[1,"card-user"],[1,"card-body-userInfo"],[1,"d-flex","flex-column","align-items-center","text-center"],[1,"mt-3"],[4,"ngIf"],[1,"row","col-md-12"],[1,"col-sm-7","col-md-7","col-lg-7"],[1,"mb-0"],[1,"col-sm-5","col-md-5","col-lg-5"],[1,"col-md-8"],[1,"card-user","mb-3"],[1,"d-flex","align-items-center","mb-3"],[1,"material-icons","text-info","mr-2"],["class","mb-0","class","cell",4,"ngIf"],["class","cell",3,"innerHtml",4,"ngIf"],[1,"cell"],[1,"cell",3,"innerHtml"],[1,"custom-pagination","mt-2",2,"text-align","center"],[3,"pageChange"]],template:function(t,n){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"div",3),u.TgZ(4,"div",4),u.TgZ(5,"div",5),u.TgZ(6,"div",6),u._UZ(7,"i",7),u.TgZ(8,"h2"),u._uU(9,"NOTIFICATION MANAGEMENT"),u.qZA(),u.qZA(),u._UZ(10,"hr"),u.TgZ(11,"div",3),u.TgZ(12,"div",8),u.TgZ(13,"div",9),u.TgZ(14,"input",10),u.NdJ("ngModelChange",function(t){return n.searchKey=t})("keypress",function(t){return n.server.preventSpaceInStart(t)}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(15,"div",11),u.TgZ(16,"h4",12),u._uU(17," From "),u.qZA(),u.qZA(),u.TgZ(18,"div",13),u.TgZ(19,"div",9),u.TgZ(20,"input",14),u.NdJ("ngModelChange",function(t){return n.fromDate=t})("change",function(){return n.onFromSelect()}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(21,"div",11),u.TgZ(22,"h4",15),u._uU(23," To "),u.qZA(),u.qZA(),u.TgZ(24,"div",13),u.TgZ(25,"div",9),u.TgZ(26,"input",16),u.NdJ("ngModelChange",function(t){return n.toDate=t})("change",function(){return n.onToSelect()}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(27,"div",17),u.TgZ(28,"button",18),u.NdJ("click",function(){return n.currentPage=1,n.getNotificationList()}),u._UZ(29,"i",19),u.qZA(),u._uU(30,"\xa0\xa0 "),u.TgZ(31,"button",20),u.NdJ("click",function(){return n.clearSearch()}),u._UZ(32,"i",21),u.qZA(),u.qZA(),u.qZA(),u.TgZ(33,"div",22),u.TgZ(34,"div",23),u.TgZ(35,"div",24),u.YNc(36,Z,40,11,"div",25),u.ALo(37,"paginate"),u.qZA(),u.YNc(38,f,2,0,"div",26),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(14),u.Q6J("ngModel",n.searchKey),u.xp6(6),u.Q6J("ngModel",n.fromDate)("max",n.maxFromDate),u.xp6(6),u.Q6J("ngModel",n.toDate)("min",n.maxToDate),u.xp6(10),u.Q6J("ngForOf",u.xi3(37,7,n.notificationList,u.kEZ(10,h,n.itemPerPage,n.totalItems,n.currentPage))),u.xp6(2),u.Q6J("ngIf",0!=n.notificationList.length))},directives:[r.Fj,r.JJ,r.On,i.sg,i.O5,g.LS],pipes:[g._s,i.uU],styles:[".noRecord[_ngcontent-%COMP%] {\n  font-weight: 600;\n  text-align: center;\n}\n\n.bg-white[_ngcontent-%COMP%] {\n  background-color: #f0f6ff !important;\n}\n\n.img-size[_ngcontent-%COMP%] {\n  border-radius: 40px;\n  -o-object-fit: cover;\n     object-fit: cover;\n  -o-object-position: center;\n     object-position: center;\n  max-width: 50px;\n}\n\n.main-body-user[_ngcontent-%COMP%] {\n  padding: 15px;\n  margin-top: 20px;\n  color: #1a202c;\n  text-align: left;\n  background-color: #e2e8f0;\n}\n\n.card-user[_ngcontent-%COMP%] {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  min-width: 0;\n  word-wrap: break-word;\n  background-color: #fff;\n  background-clip: border-box;\n  border: 0 solid rgba(0, 0, 0, 0.125);\n  border-radius: 0.25rem;\n}\n\n.card-body-userInfo[_ngcontent-%COMP%] {\n  flex: 1 1 auto;\n  min-height: 1px;\n  padding: 1rem;\n}\n\n.gutters-sm[_ngcontent-%COMP%] {\n  margin-right: -8px;\n  margin-left: -8px;\n}\n\n.gutters-sm[_ngcontent-%COMP%]    > .col[_ngcontent-%COMP%], .gutters-sm[_ngcontent-%COMP%]    > [class*=col-][_ngcontent-%COMP%] {\n  padding-right: 8px;\n  padding-left: 8px;\n}\n\n@media (min-width: 320px) and (max-width: 570px) {\n  .fmblk[_ngcontent-%COMP%] {\n    margin-right: 80%;\n  }\n\n  .toblk[_ngcontent-%COMP%] {\n    margin-left: 28px;\n  }\n}"]}),t}()}],v=function(){function t(){}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[i.ez,a.Bz.forChild(T),r.u5,o.JF,c.IJ,r.u5,r.UX,g.JX]]}),t}()}}]);